{"version":3,"sources":["request.js"],"names":[],"mappings":"AAAA;;AAEA,IAAI,UAAU,QAAQ,qCAAR,CAAd;;AAEA,IAAI,WAAW,uBAAuB,OAAvB,CAAf;;AAEA,SAAS,sBAAT,CAAgC,GAAhC,EAAqC;AAAE,SAAO,OAAO,IAAI,UAAX,GAAwB,GAAxB,GAA8B,EAAE,SAAS,GAAX,EAArC;AAAwD;;AAE/F,IAAI,QAAQ,QAAQ,WAAR,CAAZ;AACA,IAAI,SAAS,OAAO,mBAApB;AACA,IAAI,cAAc,QAAQ,cAAR,CAAlB;AACA,IAAI,UAAU,OAAO,OAAO,GAAd,CAAd;AACA,SAAS,SAAT,CAAmB,QAAnB,EAA6B;AAC3B,SAAO,SAAS,IAAT,EAAP;AACD;AACD,SAAS,WAAT,CAAqB,QAArB,EAA+B;AAC7B,MAAI,SAAS,MAAT,IAAmB,GAAnB,IAA0B,SAAS,MAAT,GAAkB,GAAhD,EAAqD;AACnD,WAAO,QAAP;AACD;;AAED,MAAI,QAAQ,IAAI,KAAJ,CAAU,SAAS,UAAnB,CAAZ;AACA,QAAM,QAAN,GAAiB,QAAjB;AACA,QAAM,KAAN;AACD;AACD,SAAS,OAAT,CAAiB,GAAjB,EAAsB,OAAtB,EAA+B,IAA/B,EAAqC;;AAEnC,MAAI,WAAW,WAAW,EAAE,QAAQ,KAAV,EAA1B;AACA,MAAI,OAAO,UAAU,GAArB;AACA,MAAI,SAAS,IAAb;AACA,WAAS,OAAT,GAAmB,EAAnB;AACA,MAAI,CAAC,oBAAD,EAAuB,OAAvB,CAA+B,GAA/B,MAAwC,CAAC,CAA7C,EAAgD;AAC9C,WAAO,GAAP;AACA,aAAS,KAAT;AACD;AACD,MAAI,MAAJ,EAAY;AACV,aAAS,OAAT,GAAmB,YAAY,OAAO,QAAP,GAAkB,SAA9B,CAAnB;AACA,QAAI,SAAS,MAAT,KAAoB,KAAxB,EAA+B;AAC7B,eAAS,OAAT,CAAiB,cAAjB,IAAmC,kBAAnC;AACD;AACF;AACD,GAAC,GAAG,SAAS,OAAb,EAAsB,QAAtB,EAAgC;AAC9B,YAAQ;AADsB,GAAhC;AAGA,SAAO,MAAM,IAAN,EAAY,QAAZ,EAAsB,IAAtB,CAA2B,WAA3B,EAAwC,IAAxC,CAA6C,SAA7C,EAAwD,IAAxD,CAA6D,UAAU,IAAV,EAAgB;AAClF,WAAO,EAAE,MAAM,IAAR,EAAP;AACD,GAFM,EAEJ,KAFI,CAEE,UAAU,GAAV,EAAe;AACtB,WAAO,EAAE,KAAK,GAAP,EAAP;AACD,GAJM,CAAP;AAKD;AACD,OAAO,OAAP,GAAiB,OAAjB","file":"request-compiled.js","sourcesContent":["'use strict';\n\nvar _assign = require('babel-runtime/core-js/object/assign');\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar fetch = require('dva/fetch');\nvar config = window.appSystemConfigInfo;\nvar create_Head = require('./createHead');\nvar baseUrl = config[config.env];\nfunction parseJSON(response) {\n  return response.json();\n}\nfunction checkStatus(response) {\n  if (response.status >= 200 && response.status < 300) {\n    return response;\n  }\n\n  var error = new Error(response.statusText);\n  error.response = response;\n  throw error;\n}\nfunction request(api, options, type) {\n\n  var _options = options || { method: 'get' };\n  var _api = baseUrl + api;\n  var noStop = true;\n  _options.headers = {};\n  if (['https://up.qbox.me'].indexOf(api) !== -1) {\n    _api = api;\n    noStop = false;\n  };\n  if (noStop) {\n    _options.headers = create_Head(type ? 'X-AUTH' : 'X-TOKEN');\n    if (_options.method !== 'get') {\n      _options.headers[\"Content-Type\"] = \"application/json\";\n    };\n  };\n  (0, _assign2.default)(_options, {\n    \"mode\": \"cors\"\n  });\n  return fetch(_api, _options).then(checkStatus).then(parseJSON).then(function (data) {\n    return { data: data };\n  }).catch(function (err) {\n    return { err: err };\n  });\n};\nmodule.exports = request;"]}